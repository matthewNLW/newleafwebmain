<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact Us | New Leaf</title>
    <meta name="description" content="Start a conversation with New Leaf. We're ready to discuss your next strategic digital project.">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&family=Playfair+Display:ital,wght@0,400..900;1,400..900&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="../styles/tokens.css">
    <link rel="stylesheet" href="../styles/base.css">
    <link rel="stylesheet" href="../styles/layout.css">
    <link rel="stylesheet" href="../styles/components.css">
    <link rel="stylesheet" href="../styles/pages/contact.css">
    <script src="https://challenges.cloudflare.com/turnstile/v0/api.js" async defer></script>
</head>
<body>


    <header class="nl-header header-light" id="header">
        <div class="nl-container">
            <a href="index.html" class="nl-logo" aria-label="New Leaf Home">New Leaf.</a>
            
            <button class="nl-mobile-toggle" aria-expanded="false" aria-controls="primary-nav" aria-label="Toggle menu">
                <span></span>
                <span></span>
                <span></span>
            </button>

            <nav class="nl-nav" id="primary-nav">
                <a href="services.html" class="nl-nav-link">Services</a>
                <a href="work.html" class="nl-nav-link">Work</a>
                <a href="process.html" class="nl-nav-link">Process</a>
                <a href="explore.html" class="nl-nav-link">Explore</a>
                <a href="about.html" class="nl-nav-link">About</a>
                <a href="contact.html" class="nl-btn nl-btn--primary">Connect</a>
            </nav>
        </div>
    </header>

    <main class="nl-main" id="main">
        <section class="nl-section nl-page-intro">
            <div class="nl-container">
                <header class="nl-section-header">
                    <span class="nl-eyebrow hero-reveal">Engagement</span>
                    <h1 class="hero-reveal">Let's Build <br>Something Great.</h1>
                    <p class="nl-intro-text hero-reveal delay-1">Have a project in mind? I'd love to hear about it. Send me a message and I'll get back to you as soon as possible.</p>
                </header>
            </div>
        </section>

        <section class="nl-section">
            <div class="nl-container">
                <!-- 2. Form Only (Centered) -->
                <div class="nl-contact-form-container reveal delay-1" style="max-width: 800px; margin: 0 auto;">
                    <form class="nl-contact-form contact-form nl-stack" action="#" method="POST">
                        <!-- Name -->
                        <div class="nl-form-group">
                            <label for="name">Your Name <span class="required">*</span></label>
                            <input type="text" id="name" name="name" placeholder="John Smith" required>
                        </div>
                        <!-- Business Name -->
                        <div class="nl-form-group">
                            <label for="business">Business Name <span class="required">*</span></label>
                            <input type="text" id="business" name="business" placeholder="Smith Landscaping" required>
                        </div>
                        <!-- Email -->
                        <div class="nl-form-group">
                            <label for="email">Email <span class="required">*</span></label>
                            <input type="email" id="email" name="email" placeholder="john@smithlandscaping.com" required>
                        </div>
                        <!-- Phone -->
                        <div class="nl-form-group">
                            <label for="phone">Phone Number <span class="optional">(optional)</span></label>
                            <input type="tel" id="phone" name="phone" placeholder="(909) 090-0900">
                        </div>
                        <!-- Website Type -->
                        <div class="nl-form-group">
                            <label for="website-type">What Type of Website do you need? <span class="required">*</span></label>
                            <select id="website-type" name="website-type" required>
                                <option value="">What Type of Website do you need?</option>
                                <option value="business">Business / Service Website</option>
                                <option value="ecommerce">E-commerce (sell products)</option>
                                <option value="booking">Booking/Appointments</option>
                                <option value="portfolio">Portfolio/Personal</option>
                                <option value="unsure">Not sure yet</option>
                            </select>
                        </div>
                        <!-- Number of Pages -->
                        <div class="nl-form-group">
                            <label for="pages">How many pages are you expecting? <span class="required">*</span></label>
                            <select id="pages" name="pages" required>
                                <option value="">How many pages are you expecting?</option>
                                <option value="1-3">1-3 pages</option>
                                <option value="4-6">4-6 pages</option>
                                <option value="7-10">7-10 pages</option>
                                <option value="unsure">Not sure</option>
                            </select>
                        </div>
                        <!-- Branding -->
                        <div class="nl-form-group">
                            <label for="branding">Do you have existing branding? <span class="required">*</span></label>
                            <select id="branding" name="branding" required>
                                <option value="">Do you have existing branding?</option>
                                <option value="full">Yes (logo + brand colors)</option>
                                <option value="partial">Partial (logo only)</option>
                                <option value="none">No, I need help</option>
                            </select>
                        </div>
                        <!-- Timeline -->
                        <div class="nl-form-group">
                            <label for="timeline">Ideal Timeline <span class="required">*</span></label>
                            <select id="timeline" name="timeline" required>
                                <option value="">Ideal Timeline</option>
                                <option value="asap">ASAP</option>
                                <option value="1-2weeks">1-2 weeks</option>
                                <option value="3-4weeks">3-4 weeks</option>
                                <option value="flexible">Flexible</option>
                            </select>
                        </div>
                        <!-- Budget -->
                        <div class="nl-form-group">
                            <label for="budget">Budget <span class="required">*</span></label>
                            <select id="budget" name="budget" required>
                                <option value="">Budget</option>
                                <option value="1000-2500">$1,000 - $2,500</option>
                                <option value="2500-5000">$2,500 - $5,000</option>
                                <option value="5000+">$5000+</option>
                                <option value="unsure">Not sure yet</option>
                            </select>
                        </div>
                        <!-- Additional Details -->
                        <div class="nl-form-group">
                            <label for="details">Additional Details</label>
                            <textarea id="details" name="details" rows="5" placeholder="Features you want, examples of websites you like, goals for the site, etc."></textarea>
                        </div>
                        <!-- Turnstile -->
                        <div class="nl-form-group">
                            <div class="cf-turnstile" data-sitekey="1x00000000000000000000AA" data-theme="dark"></div>
                        </div>
                        <!-- Submit Button -->
                        <div class="nl-form-group" style="margin-top: var(--space-md);">
                            <button type="submit" class="nl-btn nl-btn--primary btn-submit">Get My Website Plan</button>
                        </div>
                    </form>
                </div>
            </div>
        </section>
    </main>

    <footer class="nl-footer">
        <div class="nl-container">
            <div class="nl-footer-grid">
                <!-- Column 1: Brand -->
                <div class="nl-footer-col">
                    <a href="index.html" class="nl-logo">New Leaf.</a>
                    <p style="color: var(--color-text-muted); font-size: var(--fs-sm); max-width: 30ch;">
                        Strategic design and development for brands that want to grow.
                    </p>
                </div>

                <!-- Column 2: Navigate -->
                <div class="nl-footer-col">
                    <h4>Navigate</h4>
                    <a href="services.html" class="nl-footer-link">Services</a>
                    <a href="work.html" class="nl-footer-link">Work</a>
                    <a href="process.html" class="nl-footer-link">Process</a>
                    <a href="explore.html" class="nl-footer-link">Explore</a>
                </div>

                <!-- Column 3: Company -->
                <div class="nl-footer-col">
                    <h4>Company</h4>
                    <a href="about.html" class="nl-footer-link">About</a>
                    <a href="contact.html" class="nl-footer-link">Contact</a>
                    <a href="#" class="nl-footer-link">Careers</a>
                </div>

                <!-- Column 4: Contact -->
                <div class="nl-footer-col">
                    <h4>Contact</h4>
                    <a href="mailto:hello@newleaf.agency" class="nl-footer-link">hello@newleaf.agency</a>
                    <a href="tel:+18035550123" class="nl-footer-link">+1 (803) 555-0123</a>
                    <p style="color: var(--color-text-muted); font-size: var(--fs-sm); margin: 0;">
                        1201 Main St, Suite 400<br>
                        Columbia, SC 29201
                    </p>
                </div>
            </div>

            <div class="nl-footer-bottom">
                <div class="nl-footer-legal">
                    <a href="#" class="nl-footer-link" style="color: var(--color-text-muted); font-size: var(--fs-xs);">Privacy Policy</a>
                    <a href="#" class="nl-footer-link" style="color: var(--color-text-muted); font-size: var(--fs-xs);">Terms of Service</a>
                </div>
                <p>&copy; 2026 New Leaf Agency. Made in Columbia, SC.</p>
            </div>
        </div>
    </footer>

    <script src="../scripts/main.js" type="module"></script>
    <script>
        document.querySelector('.contact-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            const form = e.target;
            const btn = form.querySelector('.btn-submit');
            const originalBtnText = btn.textContent;
            // Collect data
            const formData = new FormData(form);
            
            // This object structure is CRITICAL for the Notion connection
            const data = {
                name: formData.get('name'),
                email: formData.get('email'),
                business: formData.get('business'), // Matches user snippet key
                company: formData.get('business'), // Notion expects 'company'
                service: formData.get('website-type'),
                budget: formData.get('budget'),
                turnstileToken: formData.get("cf-turnstile-response"),
                // Pack extra fields into 'message' so they show up in Notion body/notes
                message: `
    Pages: ${formData.get('pages')}
    Branding: ${formData.get('branding')}
    Timeline: ${formData.get('timeline')}
    Details: ${formData.get('details')}
                `.trim(),
                theme: document.body.getAttribute('data-theme') || 'retro',
                page: window.location.pathname, // This tells Notion which page the lead came from
                phone: formData.get('phone'),
                timeline: formData.get('timeline')
            };
            // UI State
            btn.disabled = true;
            btn.textContent = 'Sending...';
            try {
                const API_URL = 'https://newleaf-api.matthew-a54.workers.dev/lead';
                const response = await fetch(API_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });
                if (response.ok) {
                    // Success - Redirect
                    window.location.href = './thanks.htm';
                } else {
                    const err = await response.json();
                    const details = err.message ? `\nMessage: ${err.message}\nPhase: ${err.phase}` : '';
                    alert(`Error: ${err.error || 'Something went wrong'}${details}`);
                    btn.disabled = false;
                    btn.textContent = originalBtnText;
                    if (window.turnstile) window.turnstile.reset();
                }
            } catch (err) {
                console.error(err);
                alert('Connection error. Please try again.');
                btn.disabled = false;
                btn.textContent = originalBtnText;
                if (window.turnstile) window.turnstile.reset();
            }
        });
    </script>
</body>
</html>
